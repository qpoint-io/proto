# qpoint-io/proto

This repository contains [protocol buffers](https://protobuf.dev/) definitions for Qpoint products.

This repository uses [Buf](https://buf.build) for linting and code generation. Autogenerated code is available in the [gen](/gen) directory.

## Contents

- [`proto/`](/proto) - Protobuf definitions
  - [`qpoint/type/`](/proto/qpoint/type) - Common types
  - [`eventstore/v1/`](/proto/eventstore/v1/) - Event store service v1 API
  - [`qscan/v1/`](/proto/qscan/v1/) - Qscan service v1 API
- [`gen/`](/gen) - Autogenerated code
  - [`go/`](/gen/go) - Go
  - [`ts/`](/gen/ts) - TypeScript
  - [`py/`](/gen/py) - Python

## Usage

### Go

Go packages are available in [`gen/go/`](/gen/go). [Connect RPC](https://connectrpc.com/) service code is generated as well. To import the definitions in your project, run:

```
go get github.com/qpoint-io/proto
```

### TypeScript

TypeScript modules are available in [`gen/ts/`](/gen/ts).

### Python

Python modules are available in [`gen/py/`](/gen/py). To install in your project:

```bash
# Using uv
uv add git+https://github.com/qpoint-io/proto.git

# Or using pip
pip install git+https://github.com/qpoint-io/proto.git
```

Then import in your code:

```python
from eventstore.v1 import main_pb2
from qpoint.type.v1 import connection_pb2, request_pb2
```

## Development

Make your changes in the [`proto/`](/proto) directory. To regenerate code after making changes:

```bash
make
```

This will run code generation via [Buf CLI](https://buf.build) in a Docker container with all the required dependencies.
